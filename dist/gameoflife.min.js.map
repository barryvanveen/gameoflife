{"version":3,"sources":["gameoflife.js","helpers.js","state.js","canvas.js"],"names":[],"mappings":"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","file":"gameoflife.min.js","sourcesContent":["import State from './state';\r\nimport Canvas from './canvas';\r\n\r\nexport default class GameOfLife {\r\n\r\n    constructor(customConfig) {\r\n        this._defaults = {\r\n            canvas_id:              \"gameoflife_canvas\",\r\n            num_cols:               80,\r\n            num_rows:               40,\r\n            cell_size:              10,\r\n            color_lines:            \"#cccccc\",\r\n            color_cell_empty:       \"#ffffff\",\r\n            color_cell_selected:    \"#57A0DB\",\r\n            update_interval:        50\r\n        };\r\n        this._interval = null;\r\n\r\n        this.config = this._buildConfig(customConfig);\r\n        this.state = new State(this.config);\r\n        this.canvas = new Canvas(this.config, this.state);\r\n    };\r\n\r\n    _buildConfig(customConfig) {\r\n\r\n        var i;\r\n\r\n        var config = this._defaults;\r\n\r\n        if (typeof(customConfig) != \"object\") {\r\n            return;\r\n        }\r\n\r\n        for (i in customConfig) {\r\n            if (typeof(config[i]) == \"undefined\" || typeof(customConfig[i]) == \"object\") {\r\n                continue;\r\n            }\r\n            config[i] = customConfig[i];\r\n        }\r\n\r\n        return config;\r\n\r\n    };\r\n\r\n    setState(cells) {\r\n\r\n        var i, cellState;\r\n\r\n        this.stop();\r\n\r\n        if (cells.length == 0) {\r\n            return;\r\n        }\r\n\r\n        for (i=0; i<cells.length; i++) {\r\n            cellState = this.state.changeCell(cells[i].col, cells[i].row);\r\n            this.canvas._drawCell(cells[i].col, cells[i].row, cellState);\r\n        }\r\n\r\n    }\r\n\r\n    reset() {\r\n\r\n        this.stop();\r\n\r\n        this.state = new State(this.config);\r\n        this.canvas = new Canvas(this.config);\r\n\r\n    };\r\n\r\n    start() {\r\n\r\n        if (this._interval != null) {\r\n            return;\r\n        }\r\n\r\n        var self = this,\r\n            i, cellState;\r\n\r\n        // todo: replace with requestAnimationFrame?\r\n        this._interval = setInterval(function() {\r\n            var changes = self.state.computeNextState();\r\n\r\n            if (changes.length == 0) {\r\n                self.stop();\r\n                return;\r\n            }\r\n\r\n            for (i=0; i<changes.length; i++) {\r\n                cellState = self.state.changeCell(changes[i].col, changes[i].row);\r\n                self.canvas._drawCell(changes[i].col, changes[i].row, cellState);\r\n            }\r\n        }, this.config.update_interval);\r\n\r\n    };\r\n\r\n    step() {\r\n\r\n        var changes, cellState, i;\r\n\r\n        clearInterval(this._interval);\r\n        this._interval = null;\r\n\r\n        changes = this.state.computeNextState();\r\n\r\n        if (changes.length == 0) {\r\n            return;\r\n        }\r\n\r\n        for (i=0; i<changes.length; i++) {\r\n            cellState = this.state.changeCell(changes[i].col, changes[i].row);\r\n            this.canvas._drawCell(changes[i].col, changes[i].row, cellState);\r\n        }\r\n\r\n    };\r\n\r\n    stop() {\r\n\r\n        clearInterval(this._interval);\r\n        this._interval = null;\r\n\r\n    };\r\n\r\n}\r\n","export default class Helpers {\r\n\r\n    static getPosition(element) {\r\n\r\n        var left = 0,\r\n            top = 0;\r\n\r\n        if (element.offsetParent) {\r\n            do {\r\n                left += element.offsetLeft;\r\n                top += element.offsetTop;\r\n            } while (element = element.offsetParent);\r\n        }\r\n\r\n        return [left, top];\r\n\r\n    };\r\n\r\n    static mod(n, m) {\r\n        return ((m % n) + n) % n;\r\n    };\r\n\r\n}\r\n","import Helpers from './helpers';\r\n\r\nexport default class State {\r\n\r\n    constructor(config) {\r\n\r\n        this.config = config;\r\n\r\n        var col = this.config.num_cols,\r\n            row;\r\n\r\n        this.cells = [];\r\n        this.changes = [];\r\n\r\n        while (col--) {\r\n            this.cells[col] = [];\r\n\r\n            row = this.config.num_rows;\r\n            while (row--) {\r\n                this.cells[col][row] = 0;\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    changeCell(col, row) {\r\n        this.cells[col][row] = !this.cells[col][row];\r\n\r\n        return this.cells[col][row];\r\n    };\r\n\r\n    computeNextState() {\r\n\r\n        var count = 0,\r\n            col, row, rowOffset, colOffset, neighborCol, neighborRow;\r\n\r\n        this.changes = [];\r\n\r\n        // iterate over all cells\r\n        col = this.config.num_cols;\r\n        while (col--) {\r\n\r\n            row = this.config.num_rows;\r\n            while (row--) {\r\n\r\n                count = 0;\r\n\r\n                // iterate over all neighbors in Moore neighborhood with radius=1\r\n                for (colOffset = -1; colOffset <= 1; ++colOffset) {\r\n                    for (rowOffset = -1; rowOffset <= 1; ++rowOffset) {\r\n                        if (colOffset == 0 && rowOffset == 0) {\r\n                            continue;\r\n                        }\r\n\r\n                        neighborCol = col + colOffset;\r\n                        if (neighborCol < 0 || neighborCol >= this.config.num_cols) {\r\n                            neighborCol = Helpers.mod(this.config.num_cols, neighborCol);\r\n                        }\r\n\r\n                        neighborRow = row + rowOffset;\r\n                        if (neighborRow < 0 || neighborRow >= this.config.num_rows) {\r\n                            neighborRow = Helpers.mod(this.config.num_rows, neighborRow);\r\n                        }\r\n\r\n                        // count neighbors that are \"on\" or \"alive\"\r\n                        if (this.cells[neighborCol][neighborRow]) {\r\n                            count++;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // determine state of new cells\r\n                // die if under- or overpopulated\r\n                if ((count < 2 || count > 3) && this.cells[col][row]) {\r\n                    this.changes.push({col, row});\r\n                // come to life if exactly 3 neighbors\r\n                } else if (count == 3 && !this.cells[col][row]) {\r\n                    this.changes.push({col, row});\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return this.changes;\r\n\r\n    };\r\n\r\n}\r\n","import Helpers from './helpers';\r\n\r\nexport default class Canvas {\r\n\r\n    constructor(config, state) {\r\n\r\n        this.config = config;\r\n        this.state = state;\r\n\r\n        this.canvas = document.getElementById(this.config.canvas_id);\r\n\r\n        if (this.canvas == null) {\r\n            throw new Error(\"Canvas element could not be found.\");\r\n        }\r\n\r\n        this.context = this.canvas.getContext(\"2d\");\r\n\r\n        if (!this.context) {\r\n            throw new Error(\"Canvas context could not be retrieved.\");\r\n        }\r\n\r\n        this.context.fillStyle = this.config.color_cell_selected;\r\n        this.context.strokeStyle = this.config.color_lines;\r\n\r\n        this.canvas.width = (this.config.num_cols * this.config.cell_size) + 1;\r\n        this.canvas.height = (this.config.num_rows * this.config.cell_size) + 1;\r\n\r\n        // clear the canvas\r\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n        // vertical lines\r\n        for (var x = 0; x <= this.canvas.width; x += this.config.cell_size) {\r\n            this.context.moveTo(0.5 + x, 0);\r\n            this.context.lineTo(0.5 + x, this.canvas.width);\r\n        }\r\n\r\n        // horizontal lines\r\n        for (var y = 0; y <= this.canvas.width; y += this.config.cell_size) {\r\n            this.context.moveTo(0, 0.5 + y);\r\n            this.context.lineTo(this.canvas.width, 0.5 + y);\r\n        }\r\n\r\n        // draw it\r\n        this.context.stroke();\r\n\r\n        this._initEventListeners();\r\n\r\n    };\r\n\r\n    _initEventListeners() {\r\n\r\n        var self = this;\r\n\r\n        // todo: test fallback for <=IE10 with attachEvent\r\n        if (document.addEventListener) {\r\n\r\n            this.canvas.addEventListener('click', function(e) {\r\n                self._handleClick(e);\r\n            }, false);\r\n\r\n        } else if (document.attachEvent) {\r\n\r\n            this.canvas.attachEvent('click', function (e) {\r\n                self._handleClick(e);\r\n            });\r\n        }\r\n\r\n    };\r\n\r\n    _handleClick(e) {\r\n\r\n        var cell = this._getCellFromCursorPosition(e);\r\n\r\n        if (cell == false) {\r\n            return;\r\n        }\r\n\r\n        var cellState = this.state.changeCell(cell[0], cell[1]);\r\n\r\n        this._drawCell(cell[0], cell[1], cellState);\r\n\r\n    };\r\n\r\n    _getCellFromCursorPosition(e) {\r\n\r\n        var left, top;\r\n\r\n        // get coordinates of click on page\r\n        if (typeof(e.pageX) != \"undefined\" && typeof(e.pageY) != \"undefined\") {\r\n            left = e.pageX;\r\n            top = e.pageY;\r\n        } else {\r\n            left = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n            top = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n        }\r\n\r\n        // get coordinates relative to canvas\r\n        var canvas_offset = Helpers.getPosition(this.canvas);\r\n        left -= canvas_offset[0];\r\n        top -= canvas_offset[1];\r\n\r\n        if (left > (this.config.num_cols * this.config.cell_size) || top > (this.config.num_rows * this.config.cell_size)) {\r\n            return false;\r\n        }\r\n\r\n        // now calculate in which cell this click falls\r\n        return [Math.floor(left / this.config.cell_size), Math.floor(top / this.config.cell_size)];\r\n\r\n    };\r\n\r\n    _drawCell(col, row, cellState) {\r\n\r\n        if (cellState) {\r\n            this.context.fillStyle = this.config.color_cell_selected;\r\n        } else {\r\n            this.context.fillStyle = this.config.color_cell_empty;\r\n        }\r\n\r\n        // fill rectangle from (col-1,row-1) with width and height of cellSize-1\r\n        this.context.fillRect(1 + (col*this.config.cell_size), 1 + (row*this.config.cell_size), this.config.cell_size-1, this.config.cell_size-1);\r\n\r\n    };\r\n\r\n}\r\n"],"sourceRoot":"/source/"}