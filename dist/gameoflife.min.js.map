{"version":3,"sources":["gameoflife.js","helpers.js","state.js","canvas.js"],"names":[],"mappings":"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","file":"gameoflife.min.js","sourcesContent":["/*\n * GameOfLife JavaScript Plugin v1.0.0\n * https://github.com/barryvanveen/gameoflife\n *\n * Released under the MIT license\n * http://choosealicense.com/licenses/mit/\n */\n\nimport State from './state';\nimport Canvas from './canvas';\n\nexport default class GameOfLife {\n\n    constructor(customConfig) {\n        this._defaults = {\n            canvas_id:              \"gameoflife_canvas\",\n            num_cols:               80,\n            num_rows:               40,\n            cell_size:              10,\n            color_lines:            \"#cccccc\",\n            color_cell_empty:       \"#ffffff\",\n            color_cell_selected:    \"#57A0DB\",\n            update_interval:        50\n        };\n        this._interval = null;\n\n        this.config = this._buildConfig(customConfig);\n        this.state = new State(this.config);\n        this.canvas = new Canvas(this.config, this.state);\n    };\n\n    _buildConfig(customConfig) {\n\n        var i;\n\n        var config = this._defaults;\n\n        if (typeof(customConfig) != \"object\") {\n            return;\n        }\n\n        for (i in customConfig) {\n            if (typeof(config[i]) == \"undefined\" || typeof(customConfig[i]) == \"object\") {\n                continue;\n            }\n            config[i] = customConfig[i];\n        }\n\n        return config;\n\n    };\n\n    reset() {\n\n        this.stop();\n\n        this.state = new State(this.config);\n        this.canvas = new Canvas(this.config);\n\n    };\n\n    start() {\n\n        if (this._interval != null) {\n            return;\n        }\n\n        var self = this,\n            i, cellState;\n\n        // todo: replace with requestAnimationFrame?\n        this._interval = setInterval(function() {\n            var changes = self.state.computeNextState();\n\n            if (changes.length == 0) {\n                self.stop();\n                return;\n            }\n\n            for (i=0; i<changes.length; i++) {\n                cellState = self.state.changeCell(changes[i].col, changes[i].row);\n                self.canvas._drawCell(changes[i].col, changes[i].row, cellState);\n            }\n        }, this.config.update_interval);\n\n    };\n\n    step() {\n\n        var changes, cellState, i;\n\n        clearInterval(this._interval);\n        this._interval = null;\n\n        changes = this.state.computeNextState();\n\n        if (changes.length == 0) {\n            return;\n        }\n\n        for (i=0; i<changes.length; i++) {\n            cellState = this.state.changeCell(changes[i].col, changes[i].row);\n            this.canvas._drawCell(changes[i].col, changes[i].row, cellState);\n        }\n\n    };\n\n    stop() {\n\n        clearInterval(this._interval);\n        this._interval = null;\n\n    };\n\n}\n","export default class Helpers {\r\n\r\n    static getPosition(element) {\r\n\r\n        var left = 0,\r\n            top = 0;\r\n\r\n        if (element.offsetParent) {\r\n            do {\r\n                left += element.offsetLeft;\r\n                top += element.offsetTop;\r\n            } while (element = element.offsetParent);\r\n        }\r\n\r\n        return [left, top];\r\n\r\n    };\r\n\r\n    static mod(n, m) {\r\n        return ((m % n) + n) % n;\r\n    };\r\n\r\n}\r\n","import Helpers from './helpers';\r\n\r\nexport default class State {\r\n\r\n    constructor(config) {\r\n\r\n        this.config = config;\r\n\r\n        var col = this.config.num_cols,\r\n            row;\r\n\r\n        this.cells = [];\r\n        this.changes = [];\r\n\r\n        while (col--) {\r\n            this.cells[col] = [];\r\n\r\n            row = this.config.num_rows;\r\n            while (row--) {\r\n                this.cells[col][row] = 0;\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    changeCell(col, row) {\r\n        this.cells[col][row] = !this.cells[col][row];\r\n\r\n        return this.cells[col][row];\r\n    };\r\n\r\n    computeNextState() {\r\n\r\n        var count = 0,\r\n            col, row, rowOffset, colOffset, neighborCol, neighborRow;\r\n\r\n        this.changes = [];\r\n\r\n        // iterate over all cells\r\n        col = this.config.num_cols;\r\n        while (col--) {\r\n\r\n            row = this.config.num_rows;\r\n            while (row--) {\r\n\r\n                count = 0;\r\n\r\n                // iterate over all neighbors in Moore neighborhood with radius=1\r\n                for (colOffset = -1; colOffset <= 1; ++colOffset) {\r\n                    for (rowOffset = -1; rowOffset <= 1; ++rowOffset) {\r\n                        if (colOffset == 0 && rowOffset == 0) {\r\n                            continue;\r\n                        }\r\n\r\n                        neighborCol = col + colOffset;\r\n                        if (neighborCol < 0 || neighborCol >= this.config.num_cols) {\r\n                            neighborCol = Helpers.mod(this.config.num_cols, neighborCol);\r\n                        }\r\n\r\n                        neighborRow = row + rowOffset;\r\n                        if (neighborRow < 0 || neighborRow >= this.config.num_rows) {\r\n                            neighborRow = Helpers.mod(this.config.num_rows, neighborRow);\r\n                        }\r\n\r\n                        // count neighbors that are \"on\" or \"alive\"\r\n                        if (this.cells[neighborCol][neighborRow]) {\r\n                            count++;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // determine state of new cells\r\n                // die if under- or overpopulated\r\n                if ((count < 2 || count > 3) && this.cells[col][row]) {\r\n                    this.changes.push({col, row});\r\n                // come to life if exactly 3 neighbors\r\n                } else if (count == 3 && !this.cells[col][row]) {\r\n                    this.changes.push({col, row});\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return this.changes;\r\n\r\n    };\r\n\r\n}\r\n","import Helpers from './helpers';\r\n\r\nexport default class Canvas {\r\n\r\n    constructor(config, state) {\r\n\r\n        this.config = config;\r\n        this.state = state;\r\n\r\n        this.canvas = document.getElementById(this.config.canvas_id);\r\n\r\n        if (this.canvas == null) {\r\n            throw new Error(\"Canvas element could not be found.\");\r\n        }\r\n\r\n        this.context = this.canvas.getContext(\"2d\");\r\n\r\n        if (!this.context) {\r\n            throw new Error(\"Canvas context could not be retrieved.\");\r\n        }\r\n\r\n        this.context.fillStyle = this.config.color_cell_selected;\r\n        this.context.strokeStyle = this.config.color_lines;\r\n\r\n        this.canvas.width = (this.config.num_cols * this.config.cell_size) + 1;\r\n        this.canvas.height = (this.config.num_rows * this.config.cell_size) + 1;\r\n\r\n        // clear the canvas\r\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n        // vertical lines\r\n        for (var x = 0; x <= this.canvas.width; x += this.config.cell_size) {\r\n            this.context.moveTo(0.5 + x, 0);\r\n            this.context.lineTo(0.5 + x, this.canvas.width);\r\n        }\r\n\r\n        // horizontal lines\r\n        for (var y = 0; y <= this.canvas.width; y += this.config.cell_size) {\r\n            this.context.moveTo(0, 0.5 + y);\r\n            this.context.lineTo(this.canvas.width, 0.5 + y);\r\n        }\r\n\r\n        // draw it\r\n        this.context.stroke();\r\n\r\n        this._initEventListeners();\r\n\r\n    };\r\n\r\n    _initEventListeners() {\r\n\r\n        var self = this;\r\n\r\n        // todo: test fallback for <=IE10 with attachEvent\r\n        if (document.addEventListener) {\r\n\r\n            this.canvas.addEventListener('click', function(e) {\r\n                self._handleClick(e);\r\n            }, false);\r\n\r\n        } else if (document.attachEvent) {\r\n\r\n            this.canvas.attachEvent('click', function (e) {\r\n                self._handleClick(e);\r\n            });\r\n        }\r\n\r\n    };\r\n\r\n    _handleClick(e) {\r\n\r\n        var cell = this._getCellFromCursorPosition(e);\r\n\r\n        if (cell == false) {\r\n            return;\r\n        }\r\n\r\n        var cellState = this.state.changeCell(cell[0], cell[1]);\r\n\r\n        this._drawCell(cell[0], cell[1], cellState);\r\n\r\n    };\r\n\r\n    _getCellFromCursorPosition(e) {\r\n\r\n        var left, top;\r\n\r\n        // get coordinates of click on page\r\n        if (typeof(e.pageX) != \"undefined\" && typeof(e.pageY) != \"undefined\") {\r\n            left = e.pageX;\r\n            top = e.pageY;\r\n        } else {\r\n            left = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n            top = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n        }\r\n\r\n        // get coordinates relative to canvas\r\n        var canvas_offset = Helpers.getPosition(this.canvas);\r\n        left -= canvas_offset[0];\r\n        top -= canvas_offset[1];\r\n\r\n        if (left > (this.config.num_cols * this.config.cell_size) || top > (this.config.num_rows * this.config.cell_size)) {\r\n            return false;\r\n        }\r\n\r\n        // now calculate in which cell this click falls\r\n        return [Math.floor(left / this.config.cell_size), Math.floor(top / this.config.cell_size)];\r\n\r\n    };\r\n\r\n    _drawCell(col, row, cellState) {\r\n\r\n        if (cellState) {\r\n            this.context.fillStyle = this.config.color_cell_selected;\r\n        } else {\r\n            this.context.fillStyle = this.config.color_cell_empty;\r\n        }\r\n\r\n        // fill rectangle from (col-1,row-1) with width and height of cellSize-1\r\n        this.context.fillRect(1 + (col*this.config.cell_size), 1 + (row*this.config.cell_size), this.config.cell_size-1, this.config.cell_size-1);\r\n\r\n    };\r\n\r\n}\r\n"],"sourceRoot":"/source/"}